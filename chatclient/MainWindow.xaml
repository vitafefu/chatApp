<Window x:Class="ChatClient.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:ChatClient"
        Title="Онлайн чат"
        Height="560"
        Width="980">

    <Grid Margin="16">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="260"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>

        <!-- ===================== CONTACTS ===================== -->
        <Border Grid.Column="0"
                Style="{StaticResource CardBorderStyle}"
                Margin="0,0,12,0">
            <DockPanel>

                <StackPanel DockPanel.Dock="Top" Margin="0,0,0,12">
                    <TextBlock Text="Контакты"
                               Style="{StaticResource SectionTitleText}"
                               FontSize="15"/>

                    <Grid Margin="0,6,0,0">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>

                        <TextBox x:Name="SearchContactTextBox"
                                 Grid.Column="0"
                                 Height="30"
                                 Padding="6,3"
                                 Margin="0,0,8,0"/>

                        <Button Content="Найти"
                                Grid.Column="1"
                                Width="78"
                                Height="30"
                                Style="{StaticResource SecondaryButtonStyle}"
                                Click="FindContactButton_Click"/>
                    </Grid>
                </StackPanel>

                <ListBox x:Name="ContactsListBox"
                         SelectionChanged="ContactsListBox_SelectionChanged">

                    <ListBox.ItemTemplate>
                        <DataTemplate>
                            <Grid Margin="6">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="48"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>

                                <Grid Width="40" Height="40">
                                    <Ellipse Width="40" Height="40">
                                        <Ellipse.Fill>
                                            <ImageBrush ImageSource="{Binding AvatarPath}"
                                                        Stretch="UniformToFill"/>
                                        </Ellipse.Fill>
                                    </Ellipse>

                                    <Ellipse Width="10"
                                             Height="10"
                                             Fill="{Binding StatusColor}"
                                             Stroke="White"
                                             StrokeThickness="1.5"
                                             HorizontalAlignment="Right"
                                             VerticalAlignment="Bottom"
                                             Margin="0,0,1,1"/>
                                </Grid>

                                <StackPanel Grid.Column="1"
                                            Margin="10,0,0,0"
                                            VerticalAlignment="Center">
                                    <TextBlock Text="{Binding Name}"
                                               FontWeight="SemiBold"
                                               FontSize="13"/>
                                    <TextBlock Text="{Binding StatusText}"
                                               Foreground="{StaticResource BrushTextSecondary}"
                                               FontSize="11"/>
                                </StackPanel>
                            </Grid>
                        </DataTemplate>
                    </ListBox.ItemTemplate>

                </ListBox>
            </DockPanel>
        </Border>

        <!-- ===================== CHAT ===================== -->
        <Grid Grid.Column="1">
            <local:ChatView x:Name="ChatView">
                <local:ChatView.Style>
                    <Style TargetType="{x:Type local:ChatView}">
                        <Setter Property="Visibility" Value="Collapsed"/>
                        <Style.Triggers>
                            <DataTrigger Binding="{Binding IsConversationSelected}" Value="True">
                                <Setter Property="Visibility" Value="Visible"/>
                            </DataTrigger>
                        </Style.Triggers>
                    </Style>
                </local:ChatView.Style>
            </local:ChatView>

            <Border Padding="16">
                <Border.Style>
                    <Style TargetType="Border" BasedOn="{StaticResource CardBorderStyle}">
                        <Setter Property="Visibility" Value="Visible"/>
                        <Style.Triggers>
                            <DataTrigger Binding="{Binding IsConversationSelected}" Value="True">
                                <Setter Property="Visibility" Value="Collapsed"/>
                            </DataTrigger>
                        </Style.Triggers>
                    </Style>
                </Border.Style>
                <TextBlock Text="Добро пожаловать 👋&#x0a;Выберите диалог и начните общение"
                           FontSize="16"
                           FontWeight="SemiBold"
                           Foreground="{StaticResource BrushTextSecondary}"
                           TextAlignment="Center"
                           VerticalAlignment="Center"
                           HorizontalAlignment="Center"/>
            </Border>
        </Grid>
    </Grid>
</Window>